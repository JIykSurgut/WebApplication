
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <style>
        .csharpcode, .csharpcode pre {
            font-size: small;
            color: black;
            font-family: Consolas, "Courier New", Courier, Monospace;
            background-color: #ffffff;
            /*white-space: pre;*/
        }

            .csharpcode pre {
                margin: 0em;
            }

            .csharpcode .rem {
                color: #008000;
            }

            .csharpcode .kwrd {
                color: #0000ff;
            }

            .csharpcode .str {
                color: #a31515;
            }

            .csharpcode .op {
                color: #0000c0;
            }

            .csharpcode .preproc {
                color: #cc6633;
            }

            .csharpcode .asp {
                background-color: #ffff00;
            }

            .csharpcode .html {
                color: #800000;
            }

            .csharpcode .attr {
                color: #ff0000;
            }

            .csharpcode .alt {
                background-color: #f4f4f4;
                width: 100%;
                margin: 0em;
            }

            .csharpcode .lnum {
                color: #606060;
            }

    </style>

    <meta name="viewport" content="width=device-width" />
    <title>CodeView</title>
    <script src="~/Content/Bootstrap/js/jquery-3.2.1.min.js"></script>
    @*<script src="//code.jquery.com/ui/1.12.1/jquery-ui.js"></script>*@
    <link href="~/Content/Bootstrap/css/bootstrap.min-3.3.7.css" rel="stylesheet" />
    <script src="~/Content/Bootstrap/js/bootstrap.min-3.3.7.js"></script>
    <link href="~/Content/Bootstrap/css/default/style.min.css" rel="stylesheet" />
    <script src="~/Content/Bootstrap/js/jstree.min.js"></script>
</head>
<body>
<table border="1" style="width: 100%">
    <tr>
        <td style="width: 80%">
<div id="Content">
<!-- code formatted by http://manoli.net/csharpformat/ -->
<pre class="csharpcode">
        [AllowAnonymous]
        <span class="kwrd">public</span> ActionResult Claim()
        {        
    
            ClaimsIdentity ident = HttpContext.User.Identity <span class="kwrd">as</span> ClaimsIdentity;

            <span class="kwrd">if</span> (ident == <span class="kwrd">null</span>)
            {
                <span class="kwrd">return</span> View(<span class="str">"Error"</span>, <span class="kwrd">new</span> <span class="kwrd">string</span>[] { <span class="str">"Нет доступных требований"</span> });
            }
            <span class="kwrd">else</span>
            {
                <span class="kwrd">return</span> View(ident.Claims);
            }
        }</pre>
</div>
            </td><td>
        <td style="width: 20%" valign="top" >
            <div  
             id="jstree">
        
        </div>
        </td>
    </tr>
</table>  
    

    <script>
        
    $('#jstree').jstree({
        "plugins": [
            "themes", "json_data"
        ],
        "core": {
            "data": {
                "url": "/main/gettreesolush", // получаем наш JSON
                "type": "GET",
                "dataType": "json"

            },

        },
    });

    //$('#jstree').on("changed.jstree", function (event, data) {//для того чтобы редиректело

    //    console.log(data.selected[0]);
    //    api.GetArticle(data.selected[0]).done(function(data1)
    //    {
    //        console.log(data1);
    //        document.getElementById("Content").innerHTML = data1['html'];
    //        //$('#Content').innerHTML=data1;

    //    });


    //});

function API()
{
    var api = {};
    api.ajax = function (url, type, data) {
        return $.ajax({
            url: url,
            type: type,
            data: data,
            dataType: 'json'
        });
    }

    //api.GetArticle = function (id) {
    //    var url = "/main/GetArticle"
    //    var data = {id: id};
    //    return this.ajax(url,"GET", data);
    //}

    return api;
}

    var api = new API();

   

    </script>
</body>
</html>
